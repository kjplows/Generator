<?xml version="1.0" encoding="ISO-8859-1"?>

<!--
******************************************************************************************************
In this file, common physics parameters for the long-lived HNL simulation are defined.
Ideally, the user would come here to tweak parameters such as HNL mass and mixings as well as switch
on/off certain hooks such as Majorana nature, polarisation effects, etc.
It would also be interesting to set the interesting decays here (relevant in case a specific channel is
not specified in the arguments of the code itself, helps POT)

This is a demo file meant for first-time use. You can use this by putting it in $GENIE/config/CommonHNL.xml and the fluxes and ROOT-geometries generated in $GENIE/src/contrib/beamhnl.
It models a Dirac HNL of 200 MeV/c^2 mass and couplings |Ue4|^2 = |Um4|^2 = 10^-7, |U_t4|^2 = 0
Signal channels are the two-body decays pi + mu, pi + e and the three-body invisible decay v + v + v.

For simplicity, the BEAM and USER frames are unrotated with respect to the NEAR frame.

Author:
John Plows <komninos-john.plows \at physics.ox.ac.uk>
University of Oxford
April 11th, 2022
******************************************************************************************************
-->

<common_LLP_list>

  <param_set name="ParameterSpace">
    <param type="double" name="Mass"> 0.050 </param> <!-- GeV -->
    <param type="string" name="InputChannels"> LLP_generator_default.xml </param>
  </param_set>

  <param_set name="CoordinateXForm">

    <!-- Describe where the USER origin is, in NEAR coordinates -->
    <param type="vec-double" name="UserOrigin" delim=";"> 0.0 ; -60.0 ; 1000.0 </param> <!-- m -->

    <!-- Position of top volume centre in USER frame, in case it is not at USER origin -->
    <param type="vec-double" name="TopVolumeCentre" delim=";"> 0.0 ; 0.0 ; 0.0 </param> <!-- m -->

    <!-- If the USER frame is rotated with respect to the NEAR frame, identify 3 Euler angles
	 Using the Euler angles under the extrinsic x-z-x parametrisation:
	 Pass three angles (a, b, c) as a triplet. Then the rotation matrix is written as 

         R(a, b, c) = R_x(c) * R_z(b) * R_x(a). See PRD 107 (2023) 055003 Appendix 3. -->
    <param type="vec-double" name="Rotation" delim=";"> 0.0 ; 0.0 ; 0.0 </param> <!-- rad -->
    
  </param_set>

  <param_set name="Controls">
    <param type="string" name="FluxTree"> flux </param> <!-- Name of the flux tree -->
    <param type="string" name="MetaTree"> meta </param> <!-- Name of the meta tree -->

    <!-- This option speeds up the acceptance calculation by a lot, but switches off raytracing. Overrides the computer-vision and raytracing algorithms -->
    <param type="bool" name="UseSmallAngleApproximation"> true </param>
    <!-- This option uses a computer-vision algorithm (see Rezk Salama and Kolb, Proc. VMV 2005 115-122) to calculate the intesections of the 
         plane normal to parent momentum with the bounding box. Intermediate in speed and accuracy. Overrides the raytracing algortihm -->
    <param type="bool" name="UseComputerVision"> false </param>
    <!-- This option uses raytracing to deduce a detailed angular region for the detector. It is very, very slow, but yields the best results -->
    <!-- The following options change how finely you want to partition your unit sphere to do angular acceptance calculations -->
    <!-- These are modifiers, as in chop up the angular size of your bounding box into this many segments -->
    <param type="double" name="CoarseThetaDeflection"> 50.0 </param> <!-- Coarse on polar dir'n -->
    <param type="double" name="CoarsePhiDeflection"> 25.0 </param> <!-- Coarse on azimuth dir'n -->
    <param type="double" name="FineThetaDeflection"> 100.0 </param> <!-- Fine on polar dir'n -->
    <param type="double" name="FinePhiDeflection"> 100.0 </param> <!-- Fine on azimuth dir'n -->
    <!-- And the next modifier tells you how big your step size should be in terms of your baseline -->
    <param type="double" name="GraceModifier"> 0.5e-2 </param>
  </param_set>
  
</common_LLP_list>
